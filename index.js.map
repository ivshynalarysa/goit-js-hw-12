{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\n\nconst API_KEY = \"49795001-63fc88dd531083a7427250d55\";\n\nexport async function getImagesByQuery(query, page) {\n    return await axios(\"https://pixabay.com/api/\", {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 15,\n            page: page,\n        }\n    })\n}\n\n//Ця функція повинна приймати два параметри query (пошукове слово,\n//  яке є рядком) та page (номер сторінки, яка є числом), здійснювати HTTP-запит \n// і повертати значення властивості data з отриманої відповіді.","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nlet lightbox = null;\n\nfunction galeryTemplate(data) {\n\tconst {\n\t\twebformatURL,\n\t\tlargeImageURL,\n\t\ttags,\n\t\tlikes,\n\t\tviews,\n\t\tcomments,\n\t\tdownloads,\n\t} = data;\n\n\treturn `<li class=\"gallery-item\">\n        <div>\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        </div>\n        <ul class=\"gallery-sublist\">\n          <li class=\"gallery-subitem\"><p class=\"sub-text\">Likes</p><p class=\"sub-value\">${likes}</p></li>\n          <li class=\"gallery-subitem\"><p class=\"sub-text\">Views</p><p class=\"sub-value\">${views}</p></li>\n          <li class=\"gallery-subitem\"><p class=\"sub-text\">Comments</p><p class=\"sub-value\">${comments}</p></li>\n          <li class=\"gallery-subitem\"><p class=\"sub-text\">Downloads</p><p class=\"sub-value\">${downloads}</p></li>\n        </ul>\n      </li>`;\n}\n\nexport function createGallery(images) {\n  const createMurkup = images.map(galeryTemplate).join('');\n  gallery.insertAdjacentHTML('beforeend', createMurkup);\n\n  if (lightbox) {\n      lightbox.refresh();\n  } else {\n      lightbox = new SimpleLightbox('.gallery a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n      });\n  }\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n  if (lightbox) {\n      lightbox.destroy();\n      lightbox = null;\n  }\n}\n\nexport function showLoader() {\n  loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n  loader.classList.add(\"hidden\");\n}\n\nexport function smoothScroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (galleryItem) {\n      const { height } = galleryItem.getBoundingClientRect();\n      window.scrollBy({\n          left: 0,\n          top: height * 3,\n          behavior: 'smooth',\n      });\n  }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery,  showLoader, hideLoader, smoothScroll } from \"./js/render-functions\";\n\nconst refs = {\n\tform: document.querySelector('form'),\n\tsearchInput: document.querySelector(\".input\"),\n\tloader: document.querySelector('.loader'),\n\tloadMore: document.querySelector(\".load-more\"),\n\tgallery: document.querySelector('.gallery'),\n};\n\nlet page = 1;\nlet enteredInput = \"\";\n\n\n\nrefs.form.addEventListener('submit', handleSubmit);\nrefs.loadMore.addEventListener('click', onLoadMore);\nrefs.loadMore.classList.replace(\"load-more\", \"load-more-hidden\")\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n    enteredInput = event.target.elements.search.value.trim();\n\t/*refs.searchInput.value.trim();*/\n    page = 1;\n\n    if (!enteredInput) {\n        iziToast.warning({\n            position: 'topRight',\n            title: 'Warning',\n            message: 'Please enter a search query',\n        });\n        refs.searchInput.focus();\n        return;\n    }\n\n    showLoader();\n    clearGallery();\n    refs.loadMore.classList.replace(\"load-more\", \"load-more-hidden\");\n\n    getImagesByQuery(enteredInput, page)\n        .then(response => {\n            const data = response.data;\n\n            if (!data.hits || data.hits.length === 0) {\n                iziToast.warning({\n                    position: 'topRight',\n                    title: 'Warning',\n                    message: 'Sorry, no images found. Please try another query!',\n                });\n                return;\n            }\n\n            if (data.hits.length < data.totalHits) {\n                refs.loadMore.classList.replace(\"load-more-hidden\", \"load-more\");\n            } else {\n                refs.loadMore.classList.replace(\"load-more\", \"load-more-hidden\");\n            }\n            createGallery(data.hits);\n\n        })\n        .catch(error => {\n            iziToast.error({\n                position: 'topRight',\n                title: 'Error',\n                message: 'Failed to fetch images. Please try again later.',\n            });\n            console.error('Error:', error);\n        })\n        .finally(() => {\n            hideLoader();\n            /*refs.searchInput.value = \"\";*/\n        });\n\t\tevent.target.reset();\n}\n\n\nasync function onLoadMore() {\n    page++;\n    refs.loadMore.disabled = true;\n    refs.loadMore.classList.replace(\"load-more\", \"load-more-hidden\");\n    showLoader();\n\n    try {\n        const response = await getImagesByQuery(enteredInput, page);\n        const data = response.data;\n\n        createGallery(data.hits);\n        smoothScroll();\n\n        const totalPages = Math.ceil(data.totalHits / 15);\n        if (page >= totalPages) {\n            iziToast.info({\n                position: 'topRight',\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        } else {\n            refs.loadMore.classList.replace(\"load-more-hidden\", \"load-more\");\n        }\n\n    } catch (error) {\n        iziToast.error({\n            position: 'topRight',\n            title: 'Error',\n            message: error.message\n        });\n    } finally {\n        hideLoader();\n        refs.loadMore.disabled = false;\n    }\n}"],"names":["API_KEY","getImagesByQuery","query","page","axios","gallery","loader","lightbox","galeryTemplate","data","webformatURL","largeImageURL","tags","likes","views","comments","downloads","createGallery","images","createMurkup","SimpleLightbox","clearGallery","showLoader","hideLoader","smoothScroll","galleryItem","height","refs","enteredInput","handleSubmit","onLoadMore","event","iziToast","response","error","totalPages"],"mappings":"owBAGA,MAAMA,EAAU,qCAET,eAAeC,EAAiBC,EAAOC,EAAM,CAChD,OAAO,MAAMC,EAAM,2BAA4B,CAC3C,OAAQ,CACJ,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACT,CACT,CAAK,CACL,CCdA,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAIC,EAAW,KAEf,SAASC,EAAeC,EAAM,CAC7B,KAAM,CACL,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACA,EAAGP,EAEJ,MAAO;AAAA;AAAA,wCAEgCE,CAAa;AAAA,4CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,0FAIoBC,CAAK;AAAA,0FACLC,CAAK;AAAA,6FACFC,CAAQ;AAAA,8FACPC,CAAS;AAAA;AAAA,YAGvG,CAEO,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAeD,EAAO,IAAIV,CAAc,EAAE,KAAK,EAAE,EACvDH,EAAQ,mBAAmB,YAAac,CAAY,EAEhDZ,EACAA,EAAS,QAAO,EAEhBA,EAAW,IAAIa,EAAe,aAAc,CACxC,aAAc,MACd,aAAc,GACxB,CAAO,CAEP,CAEO,SAASC,GAAe,CAC7BhB,EAAQ,UAAY,GAChBE,IACAA,EAAS,QAAO,EAChBA,EAAW,KAEjB,CAEO,SAASe,GAAa,CAC3BhB,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEO,SAASiB,GAAa,CAC3BjB,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEO,SAASkB,GAAe,CAC7B,MAAMC,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CACb,KAAM,CAAE,OAAAC,CAAM,EAAKD,EAAY,sBAAqB,EACpD,OAAO,SAAS,CACZ,KAAM,EACN,IAAKC,EAAS,EACd,SAAU,QACpB,CAAO,CACJ,CACH,CCpEA,MAAMC,EAAO,CACZ,KAAM,SAAS,cAAc,MAAM,EACnC,YAAa,SAAS,cAAc,QAAQ,EAC5C,OAAQ,SAAS,cAAc,SAAS,EACxC,SAAU,SAAS,cAAc,YAAY,EAC7C,QAAS,SAAS,cAAc,UAAU,CAC3C,EAEA,IAAIxB,EAAO,EACPyB,EAAe,GAInBD,EAAK,KAAK,iBAAiB,SAAUE,CAAY,EACjDF,EAAK,SAAS,iBAAiB,QAASG,CAAU,EAClDH,EAAK,SAAS,UAAU,QAAQ,YAAa,kBAAkB,EAE/D,SAASE,EAAaE,EAAO,CAMzB,GALAA,EAAM,eAAc,EACpBH,EAAeG,EAAM,OAAO,SAAS,OAAO,MAAM,OAElD5B,EAAO,EAEH,CAACyB,EAAc,CACfI,EAAS,QAAQ,CACb,SAAU,WACV,MAAO,UACP,QAAS,6BACrB,CAAS,EACDL,EAAK,YAAY,QACjB,MACH,CAEDL,IACAD,IACAM,EAAK,SAAS,UAAU,QAAQ,YAAa,kBAAkB,EAE/D1B,EAAiB2B,EAAczB,CAAI,EAC9B,KAAK8B,GAAY,CACd,MAAMxB,EAAOwB,EAAS,KAEtB,GAAI,CAACxB,EAAK,MAAQA,EAAK,KAAK,SAAW,EAAG,CACtCuB,EAAS,QAAQ,CACb,SAAU,WACV,MAAO,UACP,QAAS,mDAC7B,CAAiB,EACD,MACH,CAEGvB,EAAK,KAAK,OAASA,EAAK,UACxBkB,EAAK,SAAS,UAAU,QAAQ,mBAAoB,WAAW,EAE/DA,EAAK,SAAS,UAAU,QAAQ,YAAa,kBAAkB,EAEnEV,EAAcR,EAAK,IAAI,CAEnC,CAAS,EACA,MAAMyB,GAAS,CACZF,EAAS,MAAM,CACX,SAAU,WACV,MAAO,QACP,QAAS,iDACzB,CAAa,EACD,QAAQ,MAAM,SAAUE,CAAK,CACzC,CAAS,EACA,QAAQ,IAAM,CACXX,GAEZ,CAAS,EACPQ,EAAM,OAAO,OACf,CAGA,eAAeD,GAAa,CACxB3B,IACAwB,EAAK,SAAS,SAAW,GACzBA,EAAK,SAAS,UAAU,QAAQ,YAAa,kBAAkB,EAC/DL,IAEA,GAAI,CAEA,MAAMb,GADW,MAAMR,EAAiB2B,EAAczB,CAAI,GACpC,KAEtBc,EAAcR,EAAK,IAAI,EACvBe,IAEA,MAAMW,EAAa,KAAK,KAAK1B,EAAK,UAAY,EAAE,EAC5CN,GAAQgC,EACRH,EAAS,KAAK,CACV,SAAU,WACV,QAAS,4DACzB,CAAa,EAEDL,EAAK,SAAS,UAAU,QAAQ,mBAAoB,WAAW,CAGtE,OAAQO,EAAO,CACZF,EAAS,MAAM,CACX,SAAU,WACV,MAAO,QACP,QAASE,EAAM,OAC3B,CAAS,CACT,QAAc,CACNX,IACAI,EAAK,SAAS,SAAW,EAC5B,CACL"}